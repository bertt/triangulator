using NUnit.Framework;
using Wkx;

namespace Triangulate.Tests
{
    public class MultipolygonZTest
    {
        [Test]
        public void TriangulateMultipolygonZ()
        {
            string wkt = "MULTIPOLYGON Z(((43399.46692919922 360617.0992509766 1.2760000228881836, 43396.34675097656 360620.7302324219 1.2760000228881836, 43399.223154785155 360620.9451982422 1.2760000228881836, 43399.46692919922 360617.0992509766 1.2760000228881836)), ((43399.687998535155 360613.6109697266 1.2760000228881836, 43393.40436816406 360613.2127763672 1.2760000228881836, 43393.39679980469 360613.3097001953 1.2760000228881836, 43399.687998535155 360613.6109697266 1.2760000228881836)), ((43395.253428222655 360625.5723955078 1.2760000228881836, 43392.93714404297 360625.9343339844 1.2760000228881836, 43395.1010234375 360627.97498339845 1.2760000228881836, 43395.253428222655 360625.5723955078 1.2760000228881836)), ((43393.39679980469 360613.3097001953 1.2760000228881836, 43393.04474902344 360616.6794511719 1.2760000228881836, 43399.46692919922 360617.0992509766 1.2760000228881836, 43393.39679980469 360613.3097001953 1.2760000228881836)), ((43399.687998535155 360613.6109697266 1.2760000228881836, 43393.39679980469 360613.3097001953 1.2760000228881836, 43399.46692919922 360617.0992509766 1.2760000228881836, 43399.687998535155 360613.6109697266 1.2760000228881836)), ((43393.39679980469 360613.3097001953 1.2760000228881836, 43393.25892138672 360613.3007890625 1.2760000228881836, 43393.04474902344 360616.6794511719 1.2760000228881836, 43393.39679980469 360613.3097001953 1.2760000228881836)), ((43399.46692919922 360617.0992509766 1.2760000228881836, 43393.04474902344 360616.6794511719 1.2760000228881836, 43396.34675097656 360620.7302324219 1.2760000228881836, 43399.46692919922 360617.0992509766 1.2760000228881836)), ((43393.04474902344 360616.6794511719 1.2760000228881836, 43392.80475878906 360620.4657060547 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836, 43393.04474902344 360616.6794511719 1.2760000228881836)), ((43392.80475878906 360620.4657060547 1.2760000228881836, 43392.792002441405 360620.667 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836, 43392.80475878906 360620.4657060547 1.2760000228881836)), ((43393.2689921875 360620.6970292969 1.2760000228881836, 43395.375986816405 360623.64002246095 1.2760000228881836, 43396.34675097656 360620.7302324219 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836)), ((43395.042979003905 360624.1660234375 1.2760000228881836, 43395.354685546874 360623.9762041016 1.2760000228881836, 43395.375986816405 360623.64002246095 1.2760000228881836, 43395.042979003905 360624.1660234375 1.2760000228881836)), ((43393.04474902344 360616.6794511719 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836, 43396.34675097656 360620.7302324219 1.2760000228881836, 43393.04474902344 360616.6794511719 1.2760000228881836)), ((43392.81702685547 360627.8299638672 1.2760000228881836, 43395.1010234375 360627.97498339845 1.2760000228881836, 43392.93714404297 360625.9343339844 1.2760000228881836, 43392.81702685547 360627.8299638672 1.2760000228881836)), ((43392.93714404297 360625.9343339844 1.2760000228881836, 43395.042979003905 360624.1660234375 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836, 43392.93714404297 360625.9343339844 1.2760000228881836)), ((43392.93714404297 360625.9343339844 1.2760000228881836, 43395.253428222655 360625.5723955078 1.2760000228881836, 43395.042979003905 360624.1660234375 1.2760000228881836, 43392.93714404297 360625.9343339844 1.2760000228881836)), ((43395.375986816405 360623.64002246095 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836, 43395.042979003905 360624.1660234375 1.2760000228881836, 43395.375986816405 360623.64002246095 1.2760000228881836)), ((43396.08362841797 360623.5319902344 1.2760000228881836, 43396.34675097656 360620.7302324219 1.2760000228881836, 43395.375986816405 360623.64002246095 1.2760000228881836, 43396.08362841797 360623.5319902344 1.2760000228881836)), ((43396.08362841797 360623.5319902344 1.2760000228881836, 43395.375986816405 360623.64002246095 1.2760000228881836, 43395.85657763672 360623.67029589845 1.2760000228881836, 43396.08362841797 360623.5319902344 1.2760000228881836)), ((43395.375986816405 360623.64002246095 1.2760000228881836, 43395.85657763672 360623.67029589845 3.7714993953704834, 43395.85657763672 360623.67029589845 1.2760000228881836, 43395.375986816405 360623.64002246095 1.2760000228881836)), ((43395.375986816405 360623.64002246095 1.2760000228881836, 43395.375986816405 360623.64002246095 3.789329767227173, 43395.85657763672 360623.67029589845 3.7714993953704834, 43395.375986816405 360623.64002246095 1.2760000228881836)), ((43395.354685546874 360623.9762041016 3.7271804809570312, 43395.375986816405 360623.64002246095 3.789329767227173, 43395.375986816405 360623.64002246095 1.2760000228881836, 43395.354685546874 360623.9762041016 3.7271804809570312)), ((43395.354685546874 360623.9762041016 1.2760000228881836, 43395.354685546874 360623.9762041016 3.7271804809570312, 43395.375986816405 360623.64002246095 1.2760000228881836, 43395.354685546874 360623.9762041016 1.2760000228881836)), ((43393.2689921875 360620.6970292969 1.2760000228881836, 43392.93714404297 360625.9343339844 3.423246145248413, 43392.93714404297 360625.9343339844 1.2760000228881836, 43393.2689921875 360620.6970292969 1.2760000228881836)), ((43393.2689921875 360620.6970292969 1.2760000228881836, 43393.2689921875 360620.6970292969 4.3916096687316895, 43392.93714404297 360625.9343339844 3.423246145248413, 43393.2689921875 360620.6970292969 1.2760000228881836)), ((43392.80475878906 360620.4657060547 1.2760000228881836, 43392.792002441405 360620.667 4.409298419952393, 43392.792002441405 360620.667 1.2760000228881836, 43392.80475878906 360620.4657060547 1.2760000228881836)), ((43392.80475878906 360620.4657060547 1.2760000228881836, 43392.80475878906 360620.4657060547 4.446523189544678, 43392.792002441405 360620.667 4.409298419952393, 43392.80475878906 360620.4657060547 1.2760000228881836)), ((43396.08362841797 360623.5319902344 3.7915449142456055, 43396.34675097656 360620.7302324219 4.307410717010498, 43396.34675097656 360620.7302324219 1.2760000228881836, 43396.08362841797 360623.5319902344 3.7915449142456055)), ((43396.08362841797 360623.5319902344 1.2760000228881836, 43396.08362841797 360623.5319902344 3.7915449142456055, 43396.34675097656 360620.7302324219 1.2760000228881836, 43396.08362841797 360623.5319902344 1.2760000228881836)), ((43393.04474902344 360616.6794511719 9.552931785583496, 43392.80475878906 360620.4657060547 7.018720626831055, 43392.80475878906 360620.4657060547 4.446523189544678, 43393.04474902344 360616.6794511719 9.552931785583496)), ((43393.04474902344 360616.6794511719 1.2760000228881836, 43393.04474902344 360616.6794511719 9.552931785583496, 43392.80475878906 360620.4657060547 4.446523189544678, 43393.04474902344 360616.6794511719 1.2760000228881836)), ((43392.80475878906 360620.4657060547 1.2760000228881836, 43393.04474902344 360616.6794511719 1.2760000228881836, 43392.80475878906 360620.4657060547 4.446523189544678, 43392.80475878906 360620.4657060547 1.2760000228881836)), ((43399.223154785155 360620.9451982422 6.978044033050537, 43399.46692919922 360617.0992509766 9.552166938781738, 43399.46692919922 360617.0992509766 1.2760000228881836, 43399.223154785155 360620.9451982422 6.978044033050537)), ((43399.223154785155 360620.9451982422 1.2760000228881836, 43399.223154785155 360620.9451982422 6.978044033050537, 43399.46692919922 360617.0992509766 1.2760000228881836, 43399.223154785155 360620.9451982422 1.2760000228881836)), ((43392.93714404297 360625.9343339844 1.2760000228881836, 43392.93714404297 360625.9343339844 3.423246145248413, 43392.81702685547 360627.8299638672 1.2760000228881836, 43392.93714404297 360625.9343339844 1.2760000228881836)), ((43392.93714404297 360625.9343339844 3.423246145248413, 43392.93714404297 360625.9343339844 5.230068683624268, 43392.81702685547 360627.8299638672 5.18735408782959, 43392.93714404297 360625.9343339844 3.423246145248413)), ((43392.81702685547 360627.8299638672 1.2760000228881836, 43392.93714404297 360625.9343339844 3.423246145248413, 43392.81702685547 360627.8299638672 5.18735408782959, 43392.81702685547 360627.8299638672 1.2760000228881836)), ((43395.1010234375 360627.97498339845 3.378023624420166, 43395.253428222655 360625.5723955078 3.4320340156555176, 43395.253428222655 360625.5723955078 1.2760000228881836, 43395.1010234375 360627.97498339845 3.378023624420166)), ((43395.1010234375 360627.97498339845 1.2760000228881836, 43395.1010234375 360627.97498339845 3.378023624420166, 43395.253428222655 360625.5723955078 1.2760000228881836, 43395.1010234375 360627.97498339845 1.2760000228881836)), ((43392.81702685547 360627.8299638672 1.2760000228881836, 43395.1010234375 360627.97498339845 3.378023624420166, 43395.1010234375 360627.97498339845 1.2760000228881836, 43392.81702685547 360627.8299638672 1.2760000228881836)), ((43392.81702685547 360627.8299638672 1.2760000228881836, 43392.81702685547 360627.8299638672 5.18735408782959, 43395.1010234375 360627.97498339845 3.378023624420166, 43392.81702685547 360627.8299638672 1.2760000228881836)), ((43396.34675097656 360620.7302324219 1.2760000228881836, 43396.34675097656 360620.7302324219 4.307410717010498, 43399.223154785155 360620.9451982422 1.2760000228881836, 43396.34675097656 360620.7302324219 1.2760000228881836)), ((43396.34675097656 360620.7302324219 4.307410717010498, 43396.34675097656 360620.7302324219 6.996273040771484, 43399.223154785155 360620.9451982422 6.978044033050537, 43396.34675097656 360620.7302324219 4.307410717010498)), ((43399.223154785155 360620.9451982422 1.2760000228881836, 43396.34675097656 360620.7302324219 4.307410717010498, 43399.223154785155 360620.9451982422 6.978044033050537, 43399.223154785155 360620.9451982422 1.2760000228881836)), ((43399.687998535155 360613.6109697266 7.206508636474609, 43393.40436816406 360613.2127763672 7.215713977813721, 43393.40436816406 360613.2127763672 1.2760000228881836, 43399.687998535155 360613.6109697266 7.206508636474609)), ((43399.687998535155 360613.6109697266 1.2760000228881836, 43399.687998535155 360613.6109697266 7.206508636474609, 43393.40436816406 360613.2127763672 1.2760000228881836, 43399.687998535155 360613.6109697266 1.2760000228881836)), ((43392.792002441405 360620.667 1.2760000228881836, 43393.2689921875 360620.6970292969 4.3916096687316895, 43393.2689921875 360620.6970292969 1.2760000228881836, 43392.792002441405 360620.667 1.2760000228881836)), ((43392.792002441405 360620.667 1.2760000228881836, 43392.792002441405 360620.667 4.409298419952393, 43393.2689921875 360620.6970292969 4.3916096687316895, 43392.792002441405 360620.667 1.2760000228881836)), ((43393.40436816406 360613.2127763672 7.215713977813721, 43393.39679980469 360613.3097001953 7.280932903289795, 43393.39679980469 360613.3097001953 1.2760000228881836, 43393.40436816406 360613.2127763672 7.215713977813721)), ((43393.40436816406 360613.2127763672 1.2760000228881836, 43393.40436816406 360613.2127763672 7.215713977813721, 43393.39679980469 360613.3097001953 1.2760000228881836, 43393.40436816406 360613.2127763672 1.2760000228881836)), ((43392.80475878906 360620.4657060547 4.446523189544678, 43396.34675097656 360620.7302324219 6.996273040771484, 43396.34675097656 360620.7302324219 4.307410717010498, 43392.80475878906 360620.4657060547 4.446523189544678)), ((43392.80475878906 360620.4657060547 4.446523189544678, 43392.80475878906 360620.4657060547 7.018720626831055, 43396.34675097656 360620.7302324219 6.996273040771484, 43392.80475878906 360620.4657060547 4.446523189544678)), ((43395.253428222655 360625.5723955078 3.4320340156555176, 43395.042979003905 360624.1660234375 3.699655532836914, 43395.042979003905 360624.1660234375 1.2760000228881836, 43395.253428222655 360625.5723955078 3.4320340156555176)), ((43395.253428222655 360625.5723955078 1.2760000228881836, 43395.253428222655 360625.5723955078 3.4320340156555176, 43395.042979003905 360624.1660234375 1.2760000228881836, 43395.253428222655 360625.5723955078 1.2760000228881836)), ((43395.042979003905 360624.1660234375 3.699655532836914, 43395.354685546874 360623.9762041016 3.7271804809570312, 43395.354685546874 360623.9762041016 1.2760000228881836, 43395.042979003905 360624.1660234375 3.699655532836914)), ((43395.042979003905 360624.1660234375 1.2760000228881836, 43395.042979003905 360624.1660234375 3.699655532836914, 43395.354685546874 360623.9762041016 1.2760000228881836, 43395.042979003905 360624.1660234375 1.2760000228881836)), ((43395.85657763672 360623.67029589845 3.7714993953704834, 43396.08362841797 360623.5319902344 3.7915449142456055, 43396.08362841797 360623.5319902344 1.2760000228881836, 43395.85657763672 360623.67029589845 3.7714993953704834)), ((43395.85657763672 360623.67029589845 1.2760000228881836, 43395.85657763672 360623.67029589845 3.7714993953704834, 43396.08362841797 360623.5319902344 1.2760000228881836, 43395.85657763672 360623.67029589845 1.2760000228881836)), ((43394.097849609374 360624.7419511719 4.402308940887451, 43392.93714404297 360625.9343339844 5.230068683624268, 43392.93714404297 360625.9343339844 3.423246145248413, 43394.097849609374 360624.7419511719 4.402308940887451)), ((43394.097849609374 360624.7419511719 3.616206407546997, 43394.097849609374 360624.7419511719 4.402308940887451, 43392.93714404297 360625.9343339844 3.423246145248413, 43394.097849609374 360624.7419511719 3.616206407546997)), ((43395.042979003905 360624.1660234375 3.699655532836914, 43394.097849609374 360624.7419511719 4.402308940887451, 43394.097849609374 360624.7419511719 3.616206407546997, 43395.042979003905 360624.1660234375 3.699655532836914)), ((43393.25892138672 360613.3007890625 7.280991077423096, 43393.04474902344 360616.6794511719 9.552931785583496, 43393.04474902344 360616.6794511719 1.2760000228881836, 43393.25892138672 360613.3007890625 7.280991077423096)), ((43393.25892138672 360613.3007890625 1.2760000228881836, 43393.25892138672 360613.3007890625 7.280991077423096, 43393.04474902344 360616.6794511719 1.2760000228881836, 43393.25892138672 360613.3007890625 1.2760000228881836)), ((43393.39679980469 360613.3097001953 7.280932903289795, 43393.25892138672 360613.3007890625 7.280991077423096, 43393.25892138672 360613.3007890625 1.2760000228881836, 43393.39679980469 360613.3097001953 7.280932903289795)), ((43393.39679980469 360613.3097001953 1.2760000228881836, 43393.39679980469 360613.3097001953 7.280932903289795, 43393.25892138672 360613.3007890625 1.2760000228881836, 43393.39679980469 360613.3097001953 1.2760000228881836)), ((43399.46692919922 360617.0992509766 1.2760000228881836, 43399.687998535155 360613.6109697266 7.206508636474609, 43399.687998535155 360613.6109697266 1.2760000228881836, 43399.46692919922 360617.0992509766 1.2760000228881836)), ((43399.46692919922 360617.0992509766 1.2760000228881836, 43399.46692919922 360617.0992509766 9.552166938781738, 43399.687998535155 360613.6109697266 7.206508636474609, 43399.46692919922 360617.0992509766 1.2760000228881836)), ((43396.34675097656 360620.7302324219 6.996273040771484, 43393.04474902344 360616.6794511719 9.552931785583496, 43399.46692919922 360617.0992509766 9.552166938781738, 43396.34675097656 360620.7302324219 6.996273040771484)), ((43396.34675097656 360620.7302324219 6.996273040771484, 43392.80475878906 360620.4657060547 7.018720626831055, 43393.04474902344 360616.6794511719 9.552931785583496, 43396.34675097656 360620.7302324219 6.996273040771484)), ((43399.223154785155 360620.9451982422 6.978044033050537, 43396.34675097656 360620.7302324219 6.996273040771484, 43399.46692919922 360617.0992509766 9.552166938781738, 43399.223154785155 360620.9451982422 6.978044033050537)), ((43393.39679980469 360613.3097001953 7.280932903289795, 43399.687998535155 360613.6109697266 7.206508636474609, 43399.46692919922 360617.0992509766 9.552166938781738, 43393.39679980469 360613.3097001953 7.280932903289795)), ((43393.39679980469 360613.3097001953 7.280932903289795, 43393.40436816406 360613.2127763672 7.215713977813721, 43399.687998535155 360613.6109697266 7.206508636474609, 43393.39679980469 360613.3097001953 7.280932903289795)), ((43393.04474902344 360616.6794511719 9.552931785583496, 43393.39679980469 360613.3097001953 7.280932903289795, 43399.46692919922 360617.0992509766 9.552166938781738, 43393.04474902344 360616.6794511719 9.552931785583496)), ((43393.04474902344 360616.6794511719 9.552931785583496, 43393.25892138672 360613.3007890625 7.280991077423096, 43393.39679980469 360613.3097001953 7.280932903289795, 43393.04474902344 360616.6794511719 9.552931785583496)), ((43395.253428222655 360625.5723955078 3.4320340156555176, 43392.93714404297 360625.9343339844 5.230068683624268, 43394.097849609374 360624.7419511719 4.402308940887451, 43395.253428222655 360625.5723955078 3.4320340156555176)), ((43395.253428222655 360625.5723955078 3.4320340156555176, 43395.1010234375 360627.97498339845 3.378023624420166, 43392.93714404297 360625.9343339844 5.230068683624268, 43395.253428222655 360625.5723955078 3.4320340156555176)), ((43395.042979003905 360624.1660234375 3.699655532836914, 43395.253428222655 360625.5723955078 3.4320340156555176, 43394.097849609374 360624.7419511719 4.402308940887451, 43395.042979003905 360624.1660234375 3.699655532836914)), ((43395.1010234375 360627.97498339845 3.378023624420166, 43392.81702685547 360627.8299638672 5.18735408782959, 43392.93714404297 360625.9343339844 5.230068683624268, 43395.1010234375 360627.97498339845 3.378023624420166)), ((43393.2689921875 360620.6970292969 4.3916096687316895, 43395.375986816405 360623.64002246095 3.789329767227173, 43394.097849609374 360624.7419511719 3.616206407546997, 43393.2689921875 360620.6970292969 4.3916096687316895)), ((43395.85657763672 360623.67029589845 3.7714993953704834, 43395.375986816405 360623.64002246095 3.789329767227173, 43396.08362841797 360623.5319902344 3.7915449142456055, 43395.85657763672 360623.67029589845 3.7714993953704834)), ((43395.375986816405 360623.64002246095 3.789329767227173, 43395.042979003905 360624.1660234375 3.699655532836914, 43394.097849609374 360624.7419511719 3.616206407546997, 43395.375986816405 360623.64002246095 3.789329767227173)), ((43392.93714404297 360625.9343339844 3.423246145248413, 43393.2689921875 360620.6970292969 4.3916096687316895, 43394.097849609374 360624.7419511719 3.616206407546997, 43392.93714404297 360625.9343339844 3.423246145248413)), ((43392.792002441405 360620.667 4.409298419952393, 43392.80475878906 360620.4657060547 4.446523189544678, 43393.2689921875 360620.6970292969 4.3916096687316895, 43392.792002441405 360620.667 4.409298419952393)), ((43392.80475878906 360620.4657060547 4.446523189544678, 43396.34675097656 360620.7302324219 4.307410717010498, 43393.2689921875 360620.6970292969 4.3916096687316895, 43392.80475878906 360620.4657060547 4.446523189544678)), ((43395.375986816405 360623.64002246095 3.789329767227173, 43396.34675097656 360620.7302324219 4.307410717010498, 43396.08362841797 360623.5319902344 3.7915449142456055, 43395.375986816405 360623.64002246095 3.789329767227173)), ((43395.042979003905 360624.1660234375 3.699655532836914, 43395.375986816405 360623.64002246095 3.789329767227173, 43395.354685546874 360623.9762041016 3.7271804809570312, 43395.042979003905 360624.1660234375 3.699655532836914)), ((43393.2689921875 360620.6970292969 4.3916096687316895, 43396.34675097656 360620.7302324219 4.307410717010498, 43395.375986816405 360623.64002246095 3.789329767227173, 43393.2689921875 360620.6970292969 4.3916096687316895)))";
            var multipolygon = (MultiPolygon)Wkx.Geometry.Deserialize<WktSerializer>(wkt);
            var polyhedral = multipolygon.ToPolyhedralSurface();
            var triangulatedPolyhedral = Triangulator.Triangulate(polyhedral);
            var s = triangulatedPolyhedral.GetBoundingBox();
            Assert.IsTrue(triangulatedPolyhedral.Geometries.Count == 86);

            GltfCreator.CreateGltf(triangulatedPolyhedral, @"d:\aaa\multipolygonz.gltf");
        }
    }
}
